I"íO<blockquote>
  <p>â€œYeah Itâ€™s leetcode problem. â€</p>
</blockquote>

<h2 id="é—®é¢˜æè¿°">é—®é¢˜æè¿°</h2>

<p>ç»™å®šä¸€ä¸ªç¼–ç åçš„å­—ç¬¦ä¸²ï¼Œå¯¹å…¶è¿›è¡Œè§£ç </p>

<p>The encoding rule is: <code class="highlighter-rouge">k[encoded_string]</code>, where the <em>encoded_string</em> inside the square brackets is being repeated exactly <em>k</em> times. Note that <em>k</em> is guaranteed to be a positive integer.</p>

<p>You may assume that the input string is always valid; No extra white spaces, square brackets are well-formed, etc.</p>

<p>Furthermore, you may assume that the original data does not contain any digits and that digits are only for those repeat numbers, <em>k</em>. For example, there wonâ€™t be input like <code class="highlighter-rouge">3a</code> or <code class="highlighter-rouge">2[4]</code>.</p>

<p><strong>Example:</strong></p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
</pre></td><td class="rouge-code"><pre>s = "3[a]2[bc]", return "aaabcbc".
s = "3[a2[c]]", return "accaccacc".
s = "2[abc]3[cd]ef", return "abcabccdcdcdef".
</pre></td></tr></tbody></table></code></pre></div></div>

<p>è¿™ä¸ªä¾‹å­é‡Œé¢æ²¡æœ‰æåˆ°çš„ï¼Œä½†æ˜¯æˆ‘åœ¨åšçš„è¿‡ç¨‹ä¸­ç¢°åˆ°çš„ä¸€äº›å¸¸ç”¨é”™è¯¯ä¾‹å­</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
</pre></td><td class="rouge-code"><pre>s = "3[a2[bc]]", return "abcbcabcbcabcbc".
s = "100[lee]", æˆ‘çš„é”™è¯¯è¿”å›æ˜¯100lee
</pre></td></tr></tbody></table></code></pre></div></div>

<h2 id="å•çº¯çš„ä¸€ä¸ªä¸€ä¸ªè§£æå­—ç¬¦ä¸²">å•çº¯çš„ä¸€ä¸ªä¸€ä¸ªè§£æå­—ç¬¦ä¸²</h2>

<p>è¿™æ˜¯æˆ‘çš„ç¬¬ä¸€ä¸ªæ€è·¯ï¼Œå¯¹æ¯ä¸ªå­—ç¬¦è§£æï¼Œå¦‚æœæ˜¯æ•°å­—å°±**ï¼Œæ˜¯ã€å°±**, ç›´æ¥å¯¼è‡´äº†é”™è¯¯ç¤ºä¾‹ä¸­çš„ç¬¬ä¸€ä¸ªä¾‹å­ï¼Œè¿”å›çš„ç»“æœä¹±ä¸ƒå…«ç³Ÿã€‚åæ¥æƒ³åˆ°æƒ³è¦è§£å†³è¿™ç§åµŒå¥—çš„ã€ã€ã€‘ã€‘é—®é¢˜ï¼Œå¯èƒ½è¿˜æ˜¯å¾—é æ ˆã€‚æ‰€ä»¥å†™äº†å¦‚ä¸‹ä»£ç </p>

<div class="language-c++ highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
</pre></td><td class="rouge-code"><pre><span class="k">class</span> <span class="nc">Solution</span> <span class="p">{</span>
<span class="nl">public:</span>
    <span class="n">string</span> <span class="n">decodeString</span><span class="p">(</span><span class="n">string</span> <span class="n">s</span><span class="p">)</span> <span class="p">{</span>
        <span class="n">string</span> <span class="n">result</span><span class="o">=</span><span class="s">""</span><span class="p">;</span>
        <span class="n">string</span> <span class="n">temp</span><span class="o">=</span><span class="s">""</span><span class="p">;</span>
        <span class="n">stack</span><span class="o">&lt;</span><span class="kt">char</span><span class="o">&gt;</span> <span class="n">st</span><span class="p">;</span>
        <span class="k">for</span><span class="p">(</span><span class="kt">char</span> <span class="n">c</span><span class="o">:</span><span class="n">s</span><span class="p">){</span>
            <span class="k">if</span><span class="p">(</span><span class="n">c</span><span class="o">!=</span><span class="sc">']'</span><span class="p">){</span>
                <span class="n">st</span><span class="p">.</span><span class="n">push</span><span class="p">(</span><span class="n">c</span><span class="p">);</span>                
            <span class="p">}</span>
            <span class="k">else</span><span class="p">{</span>                
                <span class="kt">bool</span> <span class="n">noEnd</span><span class="o">=</span><span class="nb">true</span><span class="p">;</span>
				<span class="k">while</span><span class="p">(</span><span class="n">noEnd</span><span class="p">){</span>
					<span class="kt">char</span> <span class="n">t</span><span class="o">=</span><span class="n">st</span><span class="p">.</span><span class="n">top</span><span class="p">();</span>
					<span class="n">st</span><span class="p">.</span><span class="n">pop</span><span class="p">();</span>
					<span class="k">if</span><span class="p">(</span><span class="n">t</span><span class="o">!=</span><span class="sc">'['</span><span class="p">){</span>
						<span class="k">if</span><span class="p">(</span><span class="n">isdigit</span><span class="p">(</span><span class="n">t</span><span class="p">)</span><span class="o">!=</span><span class="mi">0</span><span class="p">){</span>
							<span class="kt">int</span> <span class="n">times</span><span class="o">=</span><span class="n">t</span><span class="o">-</span><span class="sc">'0'</span><span class="p">;</span>
							<span class="k">if</span><span class="p">(</span><span class="n">st</span><span class="p">.</span><span class="n">empty</span><span class="p">()){</span>
								<span class="k">for</span><span class="p">(</span><span class="kt">int</span> <span class="n">i</span><span class="o">=</span><span class="mi">0</span><span class="p">;</span><span class="n">i</span><span class="o">&lt;</span><span class="n">times</span><span class="p">;</span><span class="n">i</span><span class="o">++</span><span class="p">){</span>
									<span class="n">result</span><span class="o">+=</span><span class="n">temp</span><span class="p">;</span>
								<span class="p">}</span>
								<span class="n">temp</span><span class="o">=</span><span class="s">""</span><span class="p">;</span>
							<span class="p">}</span>
							<span class="k">else</span><span class="p">{</span>
                                <span class="n">string</span> <span class="n">tt</span><span class="o">=</span><span class="n">temp</span><span class="p">;</span>
								<span class="k">for</span><span class="p">(</span><span class="kt">int</span> <span class="n">i</span><span class="o">=</span><span class="mi">0</span><span class="p">;</span><span class="n">i</span><span class="o">&lt;</span><span class="n">times</span><span class="o">-</span><span class="mi">1</span><span class="p">;</span><span class="n">i</span><span class="o">++</span><span class="p">){</span>
									<span class="n">temp</span><span class="o">+=</span><span class="n">tt</span><span class="p">;</span>
								<span class="p">}</span>
							<span class="p">}</span>
							<span class="n">noEnd</span><span class="o">=</span><span class="nb">false</span><span class="p">;</span>
						<span class="p">}</span>
						<span class="k">else</span><span class="p">{</span>
							<span class="n">temp</span><span class="o">=</span><span class="n">t</span><span class="o">+</span><span class="n">temp</span><span class="p">;</span>
						<span class="p">}</span>
					<span class="p">}</span>
				<span class="p">}</span>
            <span class="p">}</span>             
        <span class="p">}</span>
        <span class="k">while</span><span class="p">(</span><span class="o">!</span><span class="n">st</span><span class="p">.</span><span class="n">empty</span><span class="p">()){</span>
            <span class="n">temp</span><span class="o">=</span><span class="n">st</span><span class="p">.</span><span class="n">top</span><span class="p">()</span><span class="o">+</span><span class="n">temp</span><span class="p">;</span>
            <span class="n">st</span><span class="p">.</span><span class="n">pop</span><span class="p">();</span>
        <span class="p">}</span>
        <span class="k">return</span> <span class="n">result</span><span class="o">+</span><span class="n">temp</span><span class="p">;</span>
    <span class="p">}</span>
<span class="p">};</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<p>è¿™ä¸ªä»£ç å¤æ‚åˆ°è‡ªå·±çœ‹ç¬¬äºŒééƒ½çœ‹ä¸æ˜ç™½äº†ï¼Œè™½ç„¶æˆåŠŸçš„è§£å†³äº†ç¬¬ä¸€ä¸ªé”™è¯¯ç¤ºä¾‹ï¼Œä½†æ˜¯ç¬¬äºŒä¸ªé”™è¯¯åˆå‡ºç°äº†ï¼Œæˆ‘æ‰æ„è¯†åˆ°æˆ‘è§£æçš„æ•°å­—æ˜¯ä¸€ä½æ•°å­—ï¼Œå½“æ•°å­—æ˜¯å¤šä½çš„æ—¶å€™å°±ä¼šæœ‰é—®é¢˜ã€‚äºæ˜¯çœ‹äº†ç­”æ¡ˆæ€ä¹ˆå¤„ç†å­—ç¬¦ä¸²çš„ï¼Œä»¥ä¸‹æ˜¯æ­£ç¡®è§£æ³•ã€‚</p>

<h2 id="stack">stack</h2>

<div class="language-c++ highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
</pre></td><td class="rouge-code"><pre><span class="k">class</span> <span class="nc">Solution</span> <span class="p">{</span>
<span class="nl">public:</span>

    <span class="n">string</span> <span class="n">decodeString</span><span class="p">(</span><span class="n">string</span> <span class="n">s</span><span class="p">)</span> <span class="p">{</span>
        <span class="n">stack</span><span class="o">&lt;</span><span class="kt">char</span><span class="o">&gt;</span> <span class="n">st</span><span class="p">;</span>
        <span class="k">for</span><span class="p">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">s</span><span class="p">.</span><span class="n">size</span><span class="p">();</span> <span class="n">i</span><span class="o">++</span><span class="p">){</span>
            <span class="k">if</span><span class="p">(</span><span class="n">s</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">!=</span> <span class="sc">']'</span><span class="p">)</span> <span class="p">{</span>
                <span class="n">st</span><span class="p">.</span><span class="n">push</span><span class="p">(</span><span class="n">s</span><span class="p">[</span><span class="n">i</span><span class="p">]);</span>
            <span class="p">}</span>
            <span class="k">else</span><span class="p">{</span>
                <span class="n">string</span> <span class="n">curr_str</span> <span class="o">=</span> <span class="s">""</span><span class="p">;</span>
                
                <span class="k">while</span><span class="p">(</span><span class="n">st</span><span class="p">.</span><span class="n">top</span><span class="p">()</span> <span class="o">!=</span> <span class="sc">'['</span><span class="p">){</span>
                    <span class="n">curr_str</span> <span class="o">=</span> <span class="n">st</span><span class="p">.</span><span class="n">top</span><span class="p">()</span> <span class="o">+</span> <span class="n">curr_str</span> <span class="p">;</span>
                    <span class="n">st</span><span class="p">.</span><span class="n">pop</span><span class="p">();</span>
                <span class="p">}</span>
                
                <span class="n">st</span><span class="p">.</span><span class="n">pop</span><span class="p">();</span>   <span class="c1">// for '['</span>
                <span class="n">string</span> <span class="n">number</span> <span class="o">=</span> <span class="s">""</span><span class="p">;</span>
                
                <span class="c1">// for calculating number</span>
                
                <span class="k">while</span><span class="p">(</span><span class="o">!</span><span class="n">st</span><span class="p">.</span><span class="n">empty</span><span class="p">()</span> <span class="o">&amp;&amp;</span> <span class="n">isdigit</span><span class="p">(</span><span class="n">st</span><span class="p">.</span><span class="n">top</span><span class="p">())){</span>
                    <span class="n">number</span> <span class="o">=</span> <span class="n">st</span><span class="p">.</span><span class="n">top</span><span class="p">()</span> <span class="o">+</span> <span class="n">number</span><span class="p">;</span>
                    <span class="n">st</span><span class="p">.</span><span class="n">pop</span><span class="p">();</span>
                <span class="p">}</span>
                <span class="kt">int</span> <span class="n">k_time</span> <span class="o">=</span> <span class="n">stoi</span><span class="p">(</span><span class="n">number</span><span class="p">);</span>    <span class="c1">// convert string to number</span>
                
                <span class="k">while</span><span class="p">(</span><span class="n">k_time</span><span class="o">--</span><span class="p">){</span>
                    <span class="k">for</span><span class="p">(</span><span class="kt">int</span> <span class="n">p</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">p</span> <span class="o">&lt;</span> <span class="n">curr_str</span><span class="p">.</span><span class="n">size</span><span class="p">()</span> <span class="p">;</span> <span class="n">p</span><span class="o">++</span><span class="p">)</span>
                        <span class="n">st</span><span class="p">.</span><span class="n">push</span><span class="p">(</span><span class="n">curr_str</span><span class="p">[</span><span class="n">p</span><span class="p">]);</span>
                <span class="p">}</span>
            <span class="p">}</span>
        <span class="p">}</span>
        
        <span class="n">s</span> <span class="o">=</span> <span class="s">""</span><span class="p">;</span>
        <span class="k">while</span><span class="p">(</span><span class="o">!</span><span class="n">st</span><span class="p">.</span><span class="n">empty</span><span class="p">()){</span>
            <span class="n">s</span> <span class="o">=</span> <span class="n">st</span><span class="p">.</span><span class="n">top</span><span class="p">()</span> <span class="o">+</span> <span class="n">s</span><span class="p">;</span>
            <span class="n">st</span><span class="p">.</span><span class="n">pop</span><span class="p">();</span>
        <span class="p">}</span>
        <span class="k">return</span> <span class="n">s</span><span class="p">;</span>
        
    <span class="p">}</span>
<span class="p">};</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<p>å’Œä¸Šé¢ä¸€ä»½ä»£ç æœ€å¤§çš„ä¸åŒå°±æ˜¯ï¼Œé‡åˆ°ä¸€ä¸ªä¸­é—´çš„tempstringï¼Œå¦‚æœæ ˆè¿˜ä¸ä¸ºç©ºï¼Œè¦æŠŠtempå‹å›æ ˆé‡Œé¢å»ï¼Œä¸Šé¢ä¸€ä¸ªç¢°åˆ°â€œ<strong>â€œ3[a]2[b4[F]c]â€</strong>â€å°±ä¼šå‡ºç°é”™è¯¯ï¼Œè§£ææˆ<strong>â€œaaabcFFFFbcFFFFâ€</strong>ï¼Œåº”è¯¥æ˜¯<strong>â€œaaabFFFFcbFFFFcâ€</strong>ã€‚</p>

<p>å¦‚æœæŠŠFFFFå‹å›å»ï¼Œå†å‹å…¥c, å°±ä¸ä¼šå‡ºç°è¿™ä¸ªé”™è¯¯</p>

<h2 id="dfs">DFS</h2>

<p>ç›¸åº”çš„DFSè§£æ³•ï¼Œä¹Ÿè¦æ³¨æ„ï¼Œè¿™ç§åµŒå¥—çš„æ—¶å€™çš„é—®é¢˜</p>

<div class="language-c++ highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
</pre></td><td class="rouge-code"><pre><span class="k">class</span> <span class="nc">Solution</span> <span class="p">{</span>
<span class="nl">public:</span>
    <span class="n">string</span> <span class="n">decodeString</span><span class="p">(</span><span class="n">string</span> <span class="n">s</span><span class="p">)</span> <span class="p">{</span>
        <span class="n">string</span> <span class="n">result</span><span class="p">;</span>
        
        <span class="k">for</span><span class="p">(</span><span class="k">auto</span> <span class="n">i</span><span class="o">=</span><span class="mi">0</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">s</span><span class="p">.</span><span class="n">size</span><span class="p">();</span> <span class="n">i</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
            <span class="k">if</span><span class="p">(</span><span class="n">isdigit</span><span class="p">(</span><span class="n">s</span><span class="p">[</span><span class="n">i</span><span class="p">]))</span> <span class="n">result</span> <span class="o">+=</span> <span class="n">processGroup</span><span class="p">(</span><span class="n">s</span><span class="p">,</span> <span class="n">i</span><span class="p">);</span>
            <span class="k">if</span><span class="p">(</span><span class="n">isalpha</span><span class="p">(</span><span class="n">s</span><span class="p">[</span><span class="n">i</span><span class="p">]))</span> <span class="n">result</span> <span class="o">+=</span> <span class="n">s</span><span class="p">[</span><span class="n">i</span><span class="p">];</span>
        <span class="p">}</span>
        <span class="k">return</span> <span class="n">result</span><span class="p">;</span>
    <span class="p">}</span>
    
    <span class="n">string</span> <span class="n">processGroup</span><span class="p">(</span><span class="k">const</span> <span class="n">string</span> <span class="o">&amp;</span><span class="n">s</span><span class="p">,</span> <span class="kt">int</span> <span class="o">&amp;</span><span class="n">position</span><span class="p">)</span> <span class="p">{</span>
        <span class="n">string</span> <span class="n">count</span><span class="p">,</span> <span class="n">result</span><span class="p">,</span> <span class="n">group</span><span class="p">;</span>
        <span class="k">while</span><span class="p">(</span><span class="n">isdigit</span><span class="p">(</span><span class="n">s</span><span class="p">[</span><span class="n">position</span><span class="p">]))</span> <span class="p">{</span>
            <span class="n">count</span> <span class="o">+=</span> <span class="n">s</span><span class="p">[</span><span class="n">position</span><span class="p">];</span>
            <span class="n">position</span><span class="o">++</span><span class="p">;</span>
        <span class="p">}</span>
        <span class="kt">int</span> <span class="n">multiplier</span> <span class="o">=</span> <span class="n">stoi</span><span class="p">(</span><span class="n">count</span><span class="p">);</span>
        
        <span class="n">position</span><span class="o">++</span><span class="p">;</span>

        <span class="k">while</span><span class="p">(</span><span class="n">s</span><span class="p">[</span><span class="n">position</span><span class="p">]</span> <span class="o">!=</span> <span class="sc">']'</span><span class="p">)</span> <span class="p">{</span>
            <span class="k">if</span><span class="p">(</span><span class="n">isdigit</span><span class="p">(</span><span class="n">s</span><span class="p">[</span><span class="n">position</span><span class="p">]))</span> <span class="p">{</span>
                <span class="n">group</span> <span class="o">+=</span> <span class="n">processGroup</span><span class="p">(</span><span class="n">s</span><span class="p">,</span> <span class="n">position</span><span class="p">);</span>
            <span class="p">}</span>
            <span class="k">else</span> <span class="k">if</span><span class="p">(</span><span class="n">isalpha</span><span class="p">(</span><span class="n">s</span><span class="p">[</span><span class="n">position</span><span class="p">]))</span>
            <span class="p">{</span>
                <span class="n">group</span> <span class="o">+=</span> <span class="n">s</span><span class="p">[</span><span class="n">position</span><span class="p">];</span>
            <span class="p">}</span>
            <span class="n">position</span><span class="o">++</span><span class="p">;</span>
        <span class="p">}</span>

        <span class="k">while</span><span class="p">(</span><span class="n">multiplier</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span>
            <span class="n">result</span> <span class="o">+=</span> <span class="n">group</span><span class="p">;</span>
            <span class="n">multiplier</span><span class="o">--</span><span class="p">;</span>
        <span class="p">}</span>
        
        <span class="k">return</span> <span class="n">result</span><span class="p">;</span>        
    <span class="p">}</span>
<span class="p">};</span>
</pre></td></tr></tbody></table></code></pre></div></div>

:ET